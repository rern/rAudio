!function(r,n,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():r.QRCode=t()}(this,0,(function(){for(var r=[null,[[10,7,17,13],[1,1,1,1],[]],[[16,10,28,22],[1,1,1,1],[4,16]],[[26,15,22,18],[1,1,2,2],[4,20]],[[18,20,16,26],[2,1,4,2],[4,24]],[[24,26,22,18],[2,1,4,4],[4,28]],[[16,18,28,24],[4,2,4,4],[4,32]],[[18,20,26,18],[4,2,5,6],[4,20,36]],[[22,24,26,22],[4,2,6,6],[4,22,40]],[[22,30,24,20],[5,2,8,8],[4,24,44]],[[26,18,28,24],[5,4,8,8],[4,26,48]],[[30,20,24,28],[5,4,11,8],[4,28,52]],[[22,24,28,26],[8,4,11,10],[4,30,56]],[[22,26,22,24],[9,4,16,12],[4,32,60]],[[24,30,24,20],[9,4,16,16],[4,24,44,64]],[[24,22,24,30],[10,6,18,12],[4,24,46,68]],[[28,24,30,24],[10,6,16,17],[4,24,48,72]],[[28,28,28,28],[11,6,19,16],[4,28,52,76]],[[26,30,28,28],[13,6,21,18],[4,28,54,80]],[[26,28,26,26],[14,7,25,21],[4,28,56,84]],[[26,28,28,30],[16,8,25,20],[4,32,60,88]],[[26,28,30,28],[17,8,25,23],[4,26,48,70,92]],[[28,28,24,30],[17,9,34,23],[4,24,48,72,96]],[[28,30,30,30],[18,9,30,25],[4,28,52,76,100]],[[28,30,30,30],[20,10,32,27],[4,26,52,78,104]],[[28,26,30,30],[21,12,35,29],[4,30,56,82,108]],[[28,28,30,28],[23,12,37,34],[4,28,56,84,112]],[[28,30,30,30],[25,12,40,34],[4,32,60,88,116]],[[28,30,30,30],[26,13,42,35],[4,24,48,72,96,120]],[[28,30,30,30],[28,14,45,38],[4,28,52,76,100,124]],[[28,30,30,30],[29,15,48,40],[4,24,50,76,102,128]],[[28,30,30,30],[31,16,51,43],[4,28,54,80,106,132]],[[28,30,30,30],[33,17,54,45],[4,32,58,84,110,136]],[[28,30,30,30],[35,18,57,48],[4,28,56,84,112,140]],[[28,30,30,30],[37,19,60,51],[4,32,60,88,116,144]],[[28,30,30,30],[38,19,63,53],[4,28,52,76,100,124,148]],[[28,30,30,30],[40,20,66,56],[4,22,48,74,100,126,152]],[[28,30,30,30],[43,21,70,59],[4,26,52,78,104,130,156]],[[28,30,30,30],[45,22,74,62],[4,30,56,82,108,134,160]],[[28,30,30,30],[47,24,77,65],[4,24,52,80,108,136,164]],[[28,30,30,30],[49,25,81,68],[4,28,56,84,112,140,168]]],n=/^\d*$/,t=/^[A-Za-z0-9 $%*+\-./:]*$/,e=/^[A-Z0-9 $%*+\-./:]*$/,u=[],o=[-1],f=0,a=1;f<255;++f)u.push(a),o[a]=f,a=2*a^(a>=128?285:0);var h=[[]];for(f=0;f<30;++f){for(var c=h[f],s=[],v=0;v<=f;++v){var i=v<f?u[c[v]]:0,l=u[(f+(c[v-1]||0))%255];s.push(o[i^l])}h.push(s)}var p={};for(f=0;f<45;++f)p["0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".charAt(f)]=f;var g=[function(r,n){return(r+n)%2==0},function(r,n){return r%2==0},function(r,n){return n%3==0},function(r,n){return(r+n)%3==0},function(r,n){return((r/2|0)+(n/3|0))%2==0},function(r,n){return r*n%2+r*n%3==0},function(r,n){return(r*n%2+r*n%3)%2==0},function(r,n){return((r+n)%2+r*n%3)%2==0}],d=function(r){return r>6},m=function(n,t){var e=-8&function(n){var t=r[n],e=16*n*n+128*n+64;return d(n)&&(e-=36),t[2].length&&(e-=25*t[2].length*t[2].length-10*t[2].length-55),e}(n),u=r[n];return e-=8*u[0][t]*u[1][t]},A=function(r,n){switch(n){case 1:return r<10?10:r<27?12:14;case 2:return r<10?9:r<27?11:13;case 4:return r<10?8:16;case 8:return r<10?8:r<27?10:12}},x=function(r,n,t){var e=m(r,t)-4-A(r,n);switch(n){case 1:return 3*(e/10|0)+(e%10<4?0:e%10<7?1:2);case 2:return 2*(e/11|0)+(e%11<6?0:1);case 4:return e/8|0;case 8:return e/13|0}},b=function(r,n){for(var t=r.slice(0),e=r.length,f=n.length,a=0;a<f;++a)t.push(0);for(a=0;a<e;){var h=o[t[a++]];if(h>=0)for(var c=0;c<f;++c)t[a+c]^=u[(h+n[c])%255]}return t.slice(e)},w=function(r,n,t,e){for(var u=r<<e,o=n-1;o>=0;--o)u>>e+o&1&&(u^=t<<o);return r<<e|u},$=function(r,n,t){for(var e=g[t],u=r.length,o=0;o<u;++o)for(var f=0;f<u;++f)n[o][f]||(r[o][f]^=e(o,f));return r},y=function(r,n,t,e){for(var u=r.length,o=21522^w(t<<3|e,5,1335,10),f=0;f<15;++f){var a=[u-1,u-2,u-3,u-4,u-5,u-6,u-7,u-8,7,5,4,3,2,1,0][f];r[[0,1,2,3,4,5,7,8,u-7,u-6,u-5,u-4,u-3,u-2,u-1][f]][8]=r[8][a]=o>>f&1}return r},C=function(r){for(var n=function(r){for(var n=0,t=0;t<r.length;++t)r[t]>=5&&(n+=r[t]-5+3);for(t=5;t<r.length;t+=2){var e=r[t];r[t-1]==e&&r[t-2]==3*e&&r[t-3]==e&&r[t-4]==e&&(r[t-5]>=4*e||r[t+1]>=4*e)&&(n+=40)}return n},t=r.length,e=0,u=0,o=0;o<t;++o){var f,a=r[o];f=[0];for(var h=0;h<t;){for(c=0;h<t&&a[h];++c)++h;for(f.push(c),c=0;h<t&&!a[h];++c)++h;f.push(c)}e+=n(f),f=[0];for(h=0;h<t;){var c;for(c=0;h<t&&r[h][o];++c)++h;for(f.push(c),c=0;h<t&&!r[h][o];++c)++h;f.push(c)}e+=n(f);var s=r[o+1]||[];u+=a[0];for(h=1;h<t;++h){var v=a[h];u+=v,a[h-1]==v&&s[h]===v&&s[h-1]===v&&(e+=3)}}return e+=10*(Math.abs(u/t/t-.5)/.05|0)};return(u,o)=>{if(void 0===o&&(o=1),u.match(n))var f=1;else if(u.match(e))f=2;else f=4;u=function(r,e){switch(r){case 1:return e.match(n)?e:null;case 2:return e.match(t)?e.toUpperCase():null;case 4:if("string"==typeof e){for(var u=[],o=0;o<e.length;++o){var f=e.charCodeAt(o);f<128?u.push(f):f<2048?u.push(192|f>>6,128|63&f):f<65536?u.push(224|f>>12,128|f>>6&63,128|63&f):u.push(240|f>>18,128|f>>12&63,128|f>>6&63,128|63&f)}return u}return e}}(f,u);for(var a=1;a<=40&&!(u.length<=x(a,f,o));a++);var c=r[a],s=function(r,n,t,e){var u=[],o=0,f=8,a=t.length,h=function(r,n){if(n>=f){for(u.push(o|r>>(n-=f));n>=8;)u.push(r>>(n-=8)&255);o=0,f=8}n>0&&(o|=(r&(1<<n)-1)<<(f-=n))},c=A(r,n);switch(h(n,4),h(a,c),n){case 1:for(var s=2;s<a;s+=3)h(parseInt(t.substring(s-2,s+1),10),10);h(parseInt(t.substring(s-2),10),[0,4,7][a%3]);break;case 2:for(s=1;s<a;s+=2)h(45*p[t.charAt(s-1)]+p[t.charAt(s)],11);a%2==1&&h(p[t.charAt(s-1)],6);break;case 4:for(s=0;s<a;++s)h(t[s],8)}for(h(0,4),f<8&&u.push(o);u.length+1<e;)u.push(236,17);return u.length<e&&u.push(236),u}(a,f,u,m(a,o)>>3);s=function(r,n,t){for(var e=[],u=r.length/n|0,o=0,f=n-r.length%n,a=0;a<f;++a)e.push(o),o+=u;for(a=f;a<n;++a)e.push(o),o+=u+1;e.push(o);var h=[];for(a=0;a<n;++a)h.push(b(r.slice(e[a],e[a+1]),t));var c=[],s=r.length/n|0;for(a=0;a<s;++a)for(var v=0;v<n;++v)c.push(r[e[v]+a]);for(v=f;v<n;++v)c.push(r[e[v+1]-1]);for(a=0;a<t.length;++a)for(v=0;v<n;++v)c.push(h[v][a]);return c}(s,c[1][o],h[c[0][o]]);var v=function(n){for(var t=r[n],e=function(r){return 4*r+17}(n),u=[],o=[],f=0;f<e;++f)u.push([]),o.push([]);var a=function(r,n,t,e,f){for(var a=0;a<t;++a)for(var h=0;h<e;++h)u[r+a][n+h]=f[a]>>h&1,o[r+a][n+h]=1};for(a(0,0,9,9,[127,65,93,93,93,65,383,0,64]),a(e-8,0,8,9,[256,127,65,93,93,93,65,127]),a(0,e-8,9,8,[254,130,186,186,186,130,254,0,0]),f=9;f<e-8;++f)u[6][f]=u[f][6]=1&~f,o[6][f]=o[f][6]=1;var h=t[2],c=h.length;for(f=0;f<c;++f)for(var s=0==f?c-1:c,v=0==f||f==c-1?1:0;v<s;++v)a(h[f],h[v],5,5,[31,17,21,17,31]);if(d(n)){var i=w(n,6,7973,12),l=0;for(f=0;f<6;++f)for(v=0;v<3;++v)u[f][e-11+v]=u[e-11+v][f]=i>>l++&1,o[f][e-11+v]=o[e-11+v][f]=1}return{matrix:u,reserved:o}}(a),i=v.matrix,l=v.reserved;!function(r,n,t){for(var e=r.length,u=0,o=-1,f=e-1;f>=0;f-=2){6==f&&--f;for(var a=o<0?e-1:0,h=0;h<e;++h){for(var c=f;c>f-2;--c)n[a][c]||(r[a][c]=t[u>>3]>>(7&~u)&1,++u);a+=o}o=-o}}(i,l,s),$(i,l,0),y(i,0,o,0);var g=0,I=C(i);$(i,l,0);for(var Z=1;Z<8;Z++){$(i,l,Z),y(i,0,o,Z);var k=C(i);I>k&&(I=k,g=Z),$(i,l,Z)}$(i,l,Z=g),y(i,0,o,Z);for(var B=i.length,M="",Q=0;Q<B;Q++)for(var R=0;R<B;R++)i[Q][R]&&(M+=Q>B-8&&R<7||Q<7&&(R<7||R>B-8)?'<rect x="'+R+'" y="'+Q+'" width="1" height="1" />':'<circle cx="'+(R+.5)+'" cy="'+(Q+.5)+'" r="0.5" />');return'<svg viewBox="0 0 '+B+" "+B+'">'+M+"</svg>"}}));
